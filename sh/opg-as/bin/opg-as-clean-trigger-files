#!/bin/bash

# Get the repository root relative to the current directory (for nicer output)
GIT_ROOT="$(git rev-parse --show-toplevel)"
GIT_ROOT="$(realpath --relative-to="." "${GIT_ROOT}")"

# Remove any trigger files in the repo root
find "${GIT_ROOT}" \
	-maxdepth 1 \
	-type f \
	\( \
		-iname 'AS9-CU*' \
		-or -iname 'A9-CU*' \
		-or -iname 'CU?-AS9*' \
		-or -iname 'CUS-A9*' \
	\) \
	-delete \
	-exec echo "deleting: {}" \; \
	-exec git add "{}" \;

# Commit
git commit -m "cleaning trigger files"
