#!/bin/bash
#
# Open files in File Explorer or their default app
# TODO: options to force file explorer or a default app

paths=("${@}")

for path in "${paths[@]}"; do
    win_path=$(
        wslpath -am "${path}" \
            | sed -E 's/(wsl)\.localhost/\1$/'
    )
    if [ -n "${DEBUG}" ]; then
        echo cmd.exe /C start "${win_path//\//\\}" >&2
    fi
    cmd.exe /C start "${win_path//\//\\}"
done
